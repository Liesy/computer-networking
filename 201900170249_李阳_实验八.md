#### School of Computer Science and Technology, Shandong University

#### Lab Report on Computer Networking

| Student Number | Name | Class  | Lab Title | Period |     Date     |
| :------------: | :--: | :----: | :-------: | :----: | :----------: |
|  201900170249  | 李阳 | 智能19 | ICMP v8.0 |   2h   | May 25, 2021 |

## Hardware Environment

* Lenovo Legion Y7000P 2020H(Intel Core i7-10750H, 16GB DDR4)
* Windows 10 Home, Chinese Version

## Software Environment

* Wireshark-win64-3.44

## Purpose

* Explore ICMP messages generating by the Ping program.
* Explore ICMP messages generated by the Traceroute program.
* Explore the format and contents of an ICMP message.

## Experimental Records

### ICMP and Ping

- Open the Windows Command Prompt application.
- Start up the Wireshark packet sniffer, and begin Wireshark packet capture.
- Type either "ping –n 10 hostname" or "C:\windows\system32\ping –n 10 hostname" in the MS-DOS command line, then run the Ping program by typing return. (hostname is a host on another continent)

<img src="D:\大二下\计网\computer-networking\image\5.25.1.jpg" alt="5.25.1" style="zoom:80%;" />

- When the Ping program terminates, stop the packet capture in Wireshark.

![5.25.2](D:\大二下\计网\computer-networking\image\5.25.2.jpg)

### ICMP and Traceroute

- Open the Windows Command Prompt application.

- Start up the Wireshark packet sniffer, and begin Wireshark packet capture.

- Type either “tracert hostname” or “c:\windows\system32\tracert hostname” in the MS-DOS command line, where hostname is a host on another continent.

  <img src="D:\大二下\计网\computer-networking\image\5.25.6.jpg" alt="5.25.6" style="zoom:80%;" />

- When the Traceroute program terminates, stop packet capture in Wireshark.

## Answer to Questions

1. The IP address of my host is 172.25.129.114, the IP address of destination host is 93.184.216.34.

![5.25.3](D:\大二下\计网\computer-networking\image\5.25.3.jpg)

2. It was designed to communicate network-layer information between hosts and  routers, not between application layer processes.

   Each ICMP packet has a  "Type" and a "Code". The Type/Code combination identifies the specific  message being received. Since the network software itself interprets all ICMP  messages, no port numbers are needed to direct the ICMP message to an  application layer process.

3. Type number is 8, code number is 0. The ICMP packet also has  checksum, identifier, sequence number, and data fields. The checksum,  sequence number and identifier fields are two bytes each. 

   ![5.25.4](D:\大二下\计网\computer-networking\image\5.25.4.jpg)

4. The ICMP type is 0, and the code number is 0. The ICMP packet has  checksum, identifier, sequence number, data fields and response time. The checksum,  sequence number and identifier fields are two bytes each. 

   ![5.25.5](D:\大二下\计网\computer-networking\image\5.25.5.jpg)

5. The IP address of my host is 172.25.129.114, the IP address of destination host is 93.184.216.34.

   ![5.25.3](D:\大二下\计网\computer-networking\image\5.25.3.jpg)

6. No. If ICMP sent UDP packets instead, the IP protocol number should be 0x11.

7. The ICMP echo packet has the same fields as the ping query packets. 

8. It contains  both the IP header and the first 8 bytes of the original ICMP packet that the  error is for.

9. The last three ICMP packets are message type 0 (echo reply) rather than 11  (TTL expired).

   The datagrams have made it all the  way to the destination host before the TTL expired, so they are different.

   ![5.25.7](D:\大二下\计网\computer-networking\image\5.25.7.jpg)

10. There is a link between steps 18 and 19 that has a significantly longer delay. The header router of this link should be source host and the tail router is the destination host.